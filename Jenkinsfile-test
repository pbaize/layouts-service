pipeline {
    agent { label 'linux-slave' }
    options { timestamps() }
    stages {
        stage('Build') {
            steps {
                sh "npm install --ignore-scripts"
                sh "npm run clean"
                sh "SERVICE_VERSION=1.05 npm run build"
                sh "aws s3 cp ./res/provider s3://cdn.openfin.co/demos/cs-layouts/ --recursive"
                sh "aws s3 cp ./dist/provider s3://cdn.openfin.co/demos/cs-layouts/ --recursive"
                sh "aws s3 cp ./ s3://cdn.openfin.co/demos/cs-layouts/ --recursive --exclude '*' --include 'app-test.json' --content-type 'application/json'"
            }
        }
    }
}
